<!--
  ~ [y] hybris Platform
  ~
  ~ Copyright (c) 2000-2014 hybris AG
  ~ All rights reserved.
  ~
  ~ This software is the confidential and proprietary information of hybris
  ~ ("Confidential Information"). You shall not disclose such Confidential
  ~ Information and shall use it only in accordance with the terms of the
  ~ license agreement you entered into with hybris.
  -->
<div wishlist-auto-toggle class="wishlistContainer" ng-mouseenter="wishlistHover()" ng-mouseleave="wishlistUnHover()">

    <!-- shop or checkout -->
    <div class="btn-group btn-group-justified">

        <!-- continue shopping button -->
        <div class="btn-group continue">
            <button id="continue-shopping" ng-click="toggleWishlist()" class="btn  btn-default continue">
                <span class="hyicon hyicon-chevron-thin-left"></span>
                <span class="hidden-xs">{{'CONTINUE_SHOPPING' | translate}}</span>
                <span class="hidden-sm hidden-md hidden-lg">{{'SHOP' | translate}}</span>
            </button>
        </div>

        <!-- checkout button -->
        <div class="btn-group checkout">
            <button ng-if="wishlist.items.length" ng-click="toCheckoutDetails()" class="btn  btn-primary ">{{'CHECKOUT' | translate}} <span class="hyicon hyicon-chevron-thin-right"></span>
            </button>
            <button ng-if="!wishlist.items.length" ng-class="{ disabled: !wishlist.items.length }" class="btn">{{'CHECKOUT' | translate}}
            </button>
        </div>

    </div>

    <!-- empty wishlist message -->
    <div ng-if="!wishlist.error && !wishlist.items.length" class="empty-wishlist-text text-center">
        {{'WISHLIST_EMPTY' | translate}}
    </div>

    <!-- wishlist unavialable message  -->
    <div ng-if="wishlist.error" class="error text-center">
        {{'WISHLIST_UNAVAILABLE' | translate}}
    </div>

    <div ng-if="wishlist.items.length">

        <section class="summary">

            <!-- wishlist cost -->
            <div ng-include="'./js/app/wishlist/templates/wishlist-costs.html'"></div>

            <!-- Apply Coupon -->
            <div ng-include="'./js/app/coupons/templates/coupon-apply.html'" ng-controller="CouponCtrl" class="couponWrapper"></div>

        </section>

        <section>

            <!-- Wishlist Item -->
            <div
            ng-repeat="item in wishlist.items"
            ng-controller="WishlistNoteMixinCtrl">

                <!-- error message -->
                <div ng-if="item.error" class="error col-xs-12 col-md-12">
                    <span class="error">{{'WISHLIST_ITEM_UPDATE_ERROR' | translate}}</span>
                </div>

                <div class="wishlist-item row">

                    <!-- product img -->
                    <div class="col-xs-3 col-md-4 text-center img-col">
                        <img ng-src="{{ item && item.product.images[0].url || ''}}" class="img-responsive" />
                    </div>


                    <div class="col-xs-8 col-md-8  detail-col">
                        <div class="row">
                            <div class="col-xs-10">

                                <!-- product name -->
                                <div class="product-item-name name">{{item.product.name}}</div>

                                <ul ng-if="item.variants" class="list-unstyled">
                                    <li ng-repeat="variant in item.variants track by $index">{{variant}}</li>
                                </ul>

                                <!-- product price -->
                                <div class="price item-attr">
                                    {{'ITEM_PRICE' | translate}}: <span>{{item.price.effectiveAmount | currency: currencySymbol}}</span>
                                    <span class="priceUnit" ng-if="item.price.measurementUnit">{{item.price.measurementUnit.quantity}} {{item.price.measurementUnit.unit}}</span>
                                </div>

                                <!-- product fees -->
                                <product-fees fees="feesInformationForProductsYrnMap[item.itemYrn]"></product-fees>

                                <!-- product quantity -->
                                <div class="clearfix">
                                    <div class="input-group pull-left" ng-class="{error: item.error}">
                                        <label class="input-group-addon" for="qtyWishlist">{{'QTY' | translate}}:</label>
                                        <form ng-submit="updateWishlistItemQty(item, item.quantity,{openwishlistAfterEdit: false})">
                                            <input quantity-input type="number" min="0" step="1" pattern="\d*" class="form-control" id="qtyWishlist" ng-model="item.quantity"
                                            ng-blur="updateWishlistItemQty(item, item.quantity,{openwishlistAfterEdit: false})" />
                                        </form>
                                    </div>
                                </div>

                                <!-- total price -->
                                <div class="price-total item-attr">{{'TOTAL_PRICE' | translate}}: <span>{{ item.itemPrice.amount || 0 | currency: currencySymbol}}</span></div>

                                <!-- note display -->
                                <div id="noteMixin_area" class="noteMixin">

                                    <!-- display the note -->
                                    <div class="note-display">
                                        {{item.mixins.note.comment}}
                                    </div>

                                    <!-- note edit button -->
                                    <a id="addEditNote" ng-show="note.noteCollapsed" ng-click="note.expandNote(item.mixins.note.comment)" class="modify-note text-uppercase" href="">{{item.mixins.note.comment ? ("EDIT_NOTE" | translate) : ("ADD_NOTE" | translate)}}</a>

                                    <!-- note delete button -->
                                    <span ng-if="item.mixins.note.comment" ng-show="note.noteCollapsed">
                                        &nbsp; | &nbsp;
                                        <a href=""  ng-click="note.removeNote(item)" title="Delete Note" class="modify-note text-uppercase">{{'DELETE_NOTE' | translate}}</a>
                                    </span>

                                </div>

                            </div>

                            <!-- delete button -->
                            <div class="col-xs-2 text-right">
                                <button id="remove-product" ng-click="removeProductFromWishlist(item.id)" class="btn btn-link removeWishlistItem"><span class="hyicon hyicon-remove"></span></button>
                            </div>

                        </div>
                    </div>

                    <div class="clearfix"></div>

                    <!-- Note Mixin -->
                    <div ng-show="!note.noteCollapsed" class="wishlist-item-note">
                        <div class="col-md-12">
                            <form ng-submit="note.submit(item)">

                                <label>{{'NOTE' | translate}}</label>

                                <textarea id="wishlistItemNote" ng-model="note.content" class="form-control" rows="3"></textarea>

                                <p class="error" ng-show="note.saveFailed">{{'UNABLE_TO_SAVE_NOTE' | translate}}</p>

                                <button ng-if="!note.noteCollapsed" type="button" ng-click="note.collapseNote()" class="btn btn-link btn-lg pull-left text-uppercase" href="">{{'CANCEL' | translate}}</button>

                                <button id="saveWishlistItemNote" class="btn btn-primary btn-lg pull-right text-uppercase" type="submit">{{'SAVE' | translate}}</button>
                            </form>
                        </div>

                        <div class="clearfix"></div>

                    </div>
                </div>
            </div>
        </section>
    </div>
    <!-- /Wishlist Item -->
</div>
